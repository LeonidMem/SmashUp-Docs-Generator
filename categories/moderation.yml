header: 'Модерация'

requests:
  edit_unpublished_mashup:
    mark: 'M'
    name: 'Изменить неопубликованный мэшап'
    link: '[POST] /moderation/edit_unpublished_mashup'
    description:
      - 'Возвращает сериализованный неопубликованный мэшап.'
      - '*`statuses` — список статусов в виде строк, в данный момент доступны следующие:'
      - '  * `EXPLICIT` — присутствует ненормативная лексика'
      - '  * `MASHUP` — мэшап был опубликован в #mashup'
      - '  * `ALT` — мэшап был опубликован в \[alt]'
      - '* Значения остальных полей JSON можно найти в `Мэшапы -> Отправить мэшап на премодерацию или опубликовать его`.'

    body:
      id: 1
      name: 'Мэшап без названия'
      authors: [1, 2]
      statuses: ['MASHUP', 'EXPLICIT']
      albumId: -1
      tracks: [1, 2, 3]
      tracksUrls: ['https://www.youtube.com/watch?v=CQKxE8nBwSA', 'https://music.yandex.ru/album/6319802/track/46804521']
      statusesUrls: ['https://vk.com/mashup?w=wall-39786657_711087']
      genres: ['рок']

    response:
      name: 'Мэшап без названия'
      authors: [1, 2]
      statuses: ['MASHUP', 'EXPLICIT']
      albumId: -1
      tracks: [1, 2, 3]
      tracksUrls: ['https://www.youtube.com/watch?v=CQKxE8nBwSA', 'https://music.yandex.ru/album/6319802/track/46804521']
      statusesUrls: ['https://vk.com/mashup?w=wall-39786657_711087']
      genres: ['рок']

    regex:
      name: "^[а-яА-ЯёЁa-zA-Z0-9_\\$.,=+()*&^%$#@!\\-?':\\| ]{2,48}$"
      'tracksUrls | YouTube': 'https://www\.youtube\.com/watch\?v=([-a-zA-Z0-9_]{11})'
      'tracksUrls | Яндекс.Музыка': 'https://music\.yandex\.ru/album/(\d+)/track/(\d+)'

    codes:
      200:
        - Если всё хорошо и слава тебе, Господи
      400:
        - Если указан некорректный формат данных, либо их вовсе не хватает в теле запроса
      404:
        - Если неопубликованный мэшап с указанным ID не был найден

  publish_unpublished_mashup:
    mark: 'M'
    name: 'Публикация неопубликованного мэшапа'
    link: '[POST] /moderation/publish_mashup?id=[ID]'
    description: 'Возвращает сериализованный мэшап.'

    regex:
      ID: '\d+'

    response:
      id: 207
      name: 'Unlike 1.kla$ - Everything Почему'
      authors: ['CTAK_CO6AK']
      genres: ['рэп']
      tracks: [5781, 403]
      imageUrl: '207'
      statuses: 1
      albumId: -1
      likes: 4
      streams: 29
      bitrate: 320044
      duration: 1800000

    codes:
      200:
        - Если всё хорошо и слава тебе, Господи
      202:
        - Если мэшап был добавлен в базу данных, но что-то пошло не так при сохранении изображении или мэшапа
      400:
        - Если указан некорректный формат данных, либо их вовсе не хватает в теле запроса
      404:
        - Если неопубликованный мэшап с указанным ID не был найден

  reject_unpublished_mashup:
    mark: 'M'
    name: 'Отклонить неопубликованный мэшап'
    link: '[POST] /moderation/reject_mashup'

    body:
      id: 1
      reason: 'Оффбит'
